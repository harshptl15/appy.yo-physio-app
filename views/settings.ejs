<!--
@Author: Mohammad Huzaifa
-->

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Settings - PhysioApp</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>

body{
    background:url("https://images.unsplash.com/photo-1518611012118-696072aa579a?auto=format&fit=crop&w=2000&q=80") center/cover no-repeat fixed;
    color:white;
}

.overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.65);
    z-index:-1;
}

.glass-card{
    background:rgba(255,255,255,0.1);
    border:1px solid rgba(255,255,255,0.2);
    backdrop-filter:blur(10px);
    border-radius:18px;
    padding:20px;
}

.form-control{
    background:rgba(0,0,0,0.4);
    color:white;
    border:1px solid rgba(255,255,255,0.2);
}

.form-control:focus{
    background:rgba(0,0,0,0.5);
    color:white;
    box-shadow:none;
}

</style>
</head>

<body>
<div class="overlay"></div>
<div class="container py-5" style="max-width:1000px">
<h1 class="mb-4 text-center fw-bold">⚙️ Settings</h1>
<div class="row g-4">
<!-- PROFILE -->
<div class="col-md-6">
<div class="glass-card">
<h5 class="mb-3">Profile</h5>
<form action="/settings/profile" method="POST">
<div class="mb-3">
<label>Username</label>
<input type="text" class="form-control"
value="<%= user ? user.username : '' %>" readonly>
</div>

<div class="mb-3">
<label>New Username</label>
<input name="newUsername" class="form-control">
</div>
<button class="btn btn-light w-100">Change Username</button>
</form>

</div>
</div>


<!-- PASSWORD -->
<div class="col-md-6">
<div class="glass-card">
<h5 class="mb-3">Password</h5>
<form action="/settings/password" method="POST">
<div class="mb-3">
<label>Current Password</label>
<input name="currentPassword" type="password" class="form-control">
</div>

<div class="mb-3">
<label>New Password</label>
<input name="newPassword" type="password" class="form-control">
</div>

<div class="mb-3">
<label>Confirm Password</label>
<input name="confirmPassword" type="password" class="form-control">
</div>

<button class="btn btn-warning w-100">Update Password</button>

</form>

</div>
</div>


<!-- SECURITY -->
<div class="col-12">
<div class="glass-card">
<h5 class="mb-3">Security</h5>
<a href="/twofa/setup" class="btn btn-outline-info">Enable 2FA</a>
<a href="/twofa/disable" class="btn btn-outline-secondary" id="disable2faLink">Disable 2FA</a>
</div>
</div>
</div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
const disable2faLink = document.getElementById("disable2faLink");

if(disable2faLink){
disable2faLink.addEventListener("click", function(event){
if(!confirm("Are you sure you want to disable Two-Factor Authentication?")){
event.preventDefault();
}
});
}
});
</script>

</body>
</html>
