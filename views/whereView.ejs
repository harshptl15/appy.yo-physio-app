<!--
 @Author Gregory Mah
 @Date 2025-07-14
 @class CST8319_320
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet"/>
    <link rel="stylesheet" href="css/location.css"/>
    <script src="/js/language.js?v=4"></script>
</head>
<body>
    <div class="overlay">
        <!-- Hamburger Button -->
        <button class="hamburger" id="hamburgerBtn">â˜°</button>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div>
                <a class="nav-link" href="/dashboard"><span data-i18n="common.nav.dashboard">Dashboard</span></a>
                <a class="nav-link" href="/muscleGroup?fresh=1">ğŸ’ª <span data-i18n="dashboard.nav.exercises">Exercises</span></a>
                <a class="nav-link" href="/showRoutine">ğŸ“… <span data-i18n="dashboard.nav.routines">Routines</span></a>
                <a class="nav-link" href="/getAndShowFavourites">â­ <span data-i18n="dashboard.nav.favourites">Favourites</span></a>
                <a class="nav-link" href="/goals">ğŸ¯ <span data-i18n="dashboard.cta.goals">Your Goals</span></a>
                <a class="nav-link" href="/about">â„¹ï¸ <span data-i18n="dashboard.nav.about">About Us</span></a>
                <a class="nav-link" href="/settings">âš™ï¸ <span data-i18n="dashboard.nav.settings">Settings</span></a>
            </div>
            <a href="/logout" class="action-btn logout-btn" data-i18n="dashboard.logout">Logout</a>
        </aside>
        <div class="form-card animate__animated animate__fadeIn">
            <h1 class="animate__animated animate__bounceInDown" data-i18n="where.title">Where Are You Training?</h1>

            <!-- /whereSelect is the route to the locationSelectorController to save the location and 
            go to the category view-->
            <form action="/whereSelect" method="post">
                <br> 
                <!-- name="locationInput" is the name representing the string of the selected location that will be passed
                to the controller when the location is selected. -->
                <select name="locationInput" id="locationInput">
                    <!-- locations is an array of objects, each with a locationName string paramter to populate this select element -->
                    <% locations.forEach(function(location) { %>
                        <option value="<%= location.locationName %>"
                            data-location-key="<%= location.locationName %>"
                            <%= location.locationName === selectedLocation ? 'selected' : '' %>>                        
                            <%= location.locationName %>
                        </option>
                    <% }); %>
                </select>
                <br>
                <button type="submit" data-i18n="common.submit">Submit</button>
            </form>
        </div>
    </div>
    <script>
        const hamburgerBtn = document.getElementById("hamburgerBtn");
        const sidebar = document.getElementById("sidebar");

        hamburgerBtn.addEventListener("click", () => {
        sidebar.classList.toggle("open");
        });

        const applyDynamicTranslations = () => {
          if (!window.PhysioLanguage || typeof window.PhysioLanguage.translateDynamic !== 'function') return;
          const language = window.PhysioLanguage.getLanguagePreference();
          document.querySelectorAll('#locationInput option[data-location-key]').forEach((option) => {
            const key = option.getAttribute('data-location-key');
            option.textContent = window.PhysioLanguage.translateDynamic('location', key, language);
          });
        };

        applyDynamicTranslations();
        window.addEventListener('physio-language-changed', applyDynamicTranslations);
    </script>
</body>
</html>
